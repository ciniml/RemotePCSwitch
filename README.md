# Remote PC Switch example

## 概要

M5AtomでRelay unitを制御してPCのスイッチをON/OFFするためのファームウェアです。

## 初期設定

Relay unitをPCの電源スイッチとマザーボードとの配線に並列につないで、リレーを閉じたときにスイッチが押されたのと同じ状態になるようにします。

スケッチの `WIFI_SSID` `WIFI_PASS` を接続先Wi-Fi APのSSIDとパスフレーズに変更してビルドします。

Arduino IDEでスケッチを開いてシリアルモニタを表示した状態にしてからアップロードします。
(シリアルモニタのボーレートを115200bpsにするのを忘れずに)

アップロード完了後、WiFi APに接続成功すると、シリアルモニタにM5AtomのIPアドレスが表示されます。

PCのブラウザから `http://(M5AtomのIPアドレス)/` にアクセスすると、ユーザー名とパスワードを聞かれるので、両方とも `admin` と入力します。
ユーザー名とパスワードは `WEB_USER` `WEB_PASS` でそれぞれ変更可能ですので、動作確認後は変更して再度アップロードします。

## 使い方

`http://(AtomのIPアドレス)/switch/on` でリレーが閉じてPCのスイッチを押した状態になります。

`http://(AtomのIPアドレス)/switch/off` でリレーが開いてPCのスイッチを押していない状態になります。

`http://(AtomのIPアドレス)/cycle/short` で1秒間スイッチをONして離す動作を行います。主に電源OFF状態から電源を投入するときに使います。

`http://(AtomのIPアドレス)/cycle/long` で5秒間スイッチをONして離す動作を行います。主に電源ON状態から強制的に電源をOFFするときに使います。

`http://(AtomのIPアドレス)/name` で、このM5Atomの名前を取得できます。デフォルトは `RemotePCSwitch` です。

`http://(AtomのIPアドレス)/name/(名前)` で、このM5Atomの名前を設定出来ます。
雑実装なので、URLエンコードされるような文字渡すとそのまま保存される気がするので、気になる人はデコードして保存するようにしてください。
アルファベットなら大丈夫なはず。

### ライセンス

Boost Software License 1.0なので、ソースコード中のライセンス表記を消さなければ煮るなり焼くなりして問題ありません。

ライセンス表記にもありますが、このソースコードを試用して発生したいかなる損害に対しても、作者は責任を負いませんので、自己責任で利用をお願いします。

